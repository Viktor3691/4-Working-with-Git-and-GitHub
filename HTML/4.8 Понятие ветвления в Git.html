<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../CSS/4.2 Установка Git.css">
    <title>4 Работа с Git и GitHub</title>
</head>

<body>
    <div class="container">
        <a href="4.1 Что такое Git.html">1</a>
        <a href="4.2 Установка Git.html">2</a>
        <a href="4.3 Регистрация на GitHub.html">3</a>
        <a href="4.4 Настройка Git.html">4</a>
        <a href="4.5 Тестовый проект для Git.html">5</a>
        <a href="4.6 Игнорирование файлов в Git.html">6</a>
        <a href="4.7 Продвинутые операции в Git.html">7</a>
        <a href="4.8 Понятие ветвления в Git.html">8</a>
        <a href="4.9 Внешние репозитории в Git.html">9</a>
        <a href="#">10</a>
        <a href="#">11</a>
        <a href="#">12</a>
        <a href="#">13</a>
        <a href="#">14</a>
        <a href="#">15</a>
        <a href="#">16</a>
        <a href="#">17</a>
        <a href="#">18</a>
        <a href="#">19</a>

        <h1>4.8 Понятие ветвления в Git</h1>

        <p>Самым полезным инструментом в Git являются ветки. Они позволяют вести параллельную работу над проектом,
            переключаясь по
            мере необходимости между ветками, решая различные задачи. Давайте рассмотрим на примере, в чем суть веток и
            как их
            используют на практике. <br>
            <br>
            Итак, как вы уже знаете, по умолчанию у нас есть одна ветка - master. Обычно эту ветку считают основной.
            Можно, однако,
            создавать и дополнительные ветки, как правило для решения частных задач проекта. <br>
            <br>
            При создании новой ветки в ней будут копии файлов нашего проекта. Мы будем писать в них код, а затем, когда
            задача будет
            выполнена, мы сольем код новой ветки с нашей основной веткой. Таким образом, можно параллельно вести работу
            над
            несколькими проблемами, так, что они не будут мешать другу другу. И, по мере готовности отправлять решенные
            проблемы на
            продакшн (то есть юзерам для использования). <br>
            <br>
            При этом, при переключении между ветками, Git будет сам менять файлы в папке с вашим проектом. То есть одни
            файлы будут
            исчезать, а показываться другие. Также будут меняться тексты файлов, если они отличаются от ветки к ветке.
            Это важное
            место, но новички его не всегда понимают. Поэтому еще раз: когда вы в терминале будете менять ветку, то ваши
            файлы и
            тексты в них будут меняться в соответствии с веткой. Физически! Сами! Прям в открытом редакторе текст вашего
            файла будет
            меняться на другой! Это очень круто и удобно. <br>
            <br>
            Посмотрим на примере, как это делается на практике. Пусть у вас есть некоторый проект. В ветке master
            находится его
            боевая текущая версия, которой пользуются пользователи. Пусть вы разрабатываете новую фичу. Для этого вы
            создали новую
            ветку feature. В ней вы пишите код, реализуя нужную вам задачу. Вдруг звонит телефон и ваш начальник
            говорит, что на
            проекте обнаружен серьезный баг и его срочно нужно исправить.

            Для этого вы создаете ветку fix, копируя в нее весь код проекта из ветки master. Вы пишите код, исправляющий
            баг, а
            затем вливаете этот код в основную ветку master и отправляете этот код на продакшн.

            Затем переключаетесь на ветку feature и спокойно продолжаете работу над вашей фичей. Когда она будет
            закончена, вы
            вливаете ее в основую ветку master.

            В следующих уроках мы продолжим знакомиться с ветками на практике.
        </p>

        <h2>Ветка master в Git</h2>

        <p>По умолчанию имя основной ветки в Git - master. Технически это не особенная ветка - она точно такая же, как и
            все
            остальные ветки. Однако, зачастую эту ветку используют как основную ветку проекта, а остальные ветки делают
            вспомогательными, создавая их для решения частных задач, а потом удаляя их. <br>
            <br>
            Последнее время часто заменяют название master на main, переименовывая главную ветку проекта. Дело в том,
            что слово
            "master" переводится как "хозяин" и это теперь не политкорректно.
        </p>

        <h2>Создание новой ветки в Git</h2>

        <p>Ветки в Git создаются с помощью команды branch. Давайте создадим новую ветку с именем test:</p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            git branch test<br>
            <br>
        </div>
        <p>При этом будет создана новая ветка, однако переключения на нее не произойдет. В следующих уроках мы научимся
            просматривать список текущих веток и переключаться между ними.</p>
        <br>
        <i>Создайте новую ветку в вашем Git репозитории.</i>
        <br>
        <br>
        <img src="../IMG/43.png" alt="43" width="1040px">

        <h2>Просмотр веток в Git</h2>

        <p>Для того, чтобы просмотреть все ветки, которые есть в вашем репозитории, нужно выполнить команду branch без
            параметров:</p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            git branch<br>
            <br>
        </div>
        <p>После выполнения команды мы увидим список веток, при этом текущая ветка будет отмечена звездочкой:</p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            * main<br>
            test<br>
            <br>
        </div>
        <br>
        <img src="../IMG/44.png" alt="44" width="1040px">

        <h2>Переключение веток в Git</h2>

        <p>Давайте теперь научимся переключаться между ветками. Для этого используется команда checkout, после
            указывается имя
            ветки. Переключимся на созданную нами в предыдущем уроке ветку test:</p>
        <br>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            git checkout test<br>
            <br>
        </div>

        <p>Можно также использовать синоним switch:</p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            git switch test<br>
            <br>
        </div>
        <p>После выполнения любой из приведенных двух команд в терминале появится сообщение о переходе на указанную
            ветку:</p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            Switched to branch 'test'<br>
            <br>
        </div>
        <p>При переключении с ветки на ветку, файлы в рабочем каталоге Git тоже меняются. То есть физически исчезнут
            файлы одной
            ветки и появятся файлы другой ветки. Обратите на это внимание, так как это не очень очевидно для
            новичков в Git. <br>
            <br>
            Получается, что в Git все изменения в ветках изолируются друг от друга и можно легко и быстро создавать
            несколько
            ответвлений проекта, не внося путаницу в исходную версию.
        </p>
        <i>Переключитесь на новую ветку. Находясь в этой ветке сделайте изменения в файле, проиндексируйте их и
            выполните коммит.</i> <br>
        <i> Затем переключитесь на основную ветку и проверьте содержимое файла - оно должно вернутся к начальному
            варианту.</i>

        <h2>Слияние веток в Git</h2>

        <p>Как правило новые ветки создаются, как ответвления основной ветки для решения какой-нибудь задачи. После
            того, как
            задача будет решена, мы можем влить содержимое побочной ветки в основую. Это делается с помощью команды
            merge. <br>
            <br>
            Разберем этот процесс подробнее. Пусть у нас есть ветка master и ветка test. <br>
            <br>
            Переключимся на ветку test, сделаем изменения в файле, проиндексируем его и сохраним коммит:
        </p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            git checkout test<br>
            git add index.html<br>
            git commit -m “Добавил новую строку”<br>
            <br>
        </div>
        <p>Теперь переключимся на ветку main и выполним слияние:</p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            git checkout main<br>
            git merge test<br>
            <br>
        </div>
        <p>После выполнения этой команды Git попросит нас ввести комментарий к слиянию. После ввода комментария в
            терминале
            появится сообщение об успешном слиянии. <br>
            <br>
            При этом после слияния ветка test не исчезнет. Ее содержимое вольется в основную ветку. Основная ветка
            изменится после
            слияния, а вот ветка test останется такой же. Мы можем дальше продолжить работу с веткой test, периодически
            отправляя ее
            содержимое в основую ветку. <br>
            <br>
            Тут важно обратить внимание на терминологию. В литературе и в жизни мы говорим о том, что сливаем две ветки
            или о
            слиянии веток. И когда мы так говорим, то кажется, что было две разных ветки и они слились в одну - общую.
            На самом же
            деле мы не сливаем ветки, а вливаем содержимое одной ветки в другую. В жизни так не говорят (и вы не
            говорите), но
            всегда понимайте суть процесса - мы вливаем, а не сливаем.
        </p>
        <i>Пусть у вас есть ветка main. Создайте еще одну ветку problem.</i><br>
        <br>
        <img src="../IMG/45.png" alt="45" width="1040px"><br>
        <br>
        <i>В новой ветке создайте файл, проиндексируйте его и сделайте коммит.</i><br>
        <br>
        <img src="../IMG/46.png" alt="46" width="1040px"><br>
        <img src="../IMG/47.png" alt="47" width="1040"> <br>
        <br>
        <i>Переключитесь на основную ветку и выполните слияние ветки problem в ветку main.</i>
        <br>
        <br>
        <img src="../IMG/48.png" alt="48" width="1040px"><br>
        <br>

        <i> Еще раз влейте вашу ветку problem в ветку main.</i><br>
        <br>
        <i>Измените в ветке problem ваш файл. Проиндексируйте его и сделайте коммит. Еще раз влейте вашу ветку problem в
            ветку
            master.</i>

        <h2>Конфликт при слиянии веток в Git</h2>

        <p>В процессе слияния двух веток возможны конфликты, если в каждой из веток мы изменяли один и тот же файл.
            Рассмотрим
            ситуацию, когда в обоих ветках main и problem из предыдущего урока мы изменили и сделали коммит на один тот
            же файл
            file.txt. А затем применили команду слияния:</p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            git merge problem<br>
            <br>
        </div>
        <p>В результате увидим ошибку:</p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            Auto-merging file.txt <br>
            CONFLICT (content): Merge conflict in file.txt <br>
            Automatic merge failed; fix conflicts and then commit the result. <br>
            <br>
        </div>
        <p>Кроме того, в изменяемом файле мы увидим маркеры конфликта:</p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            &lt;&lt;&lt;&lt;&lt; HEAD <br>
            тут будут написаны изменения ветки main <br>
            ======= <br>
            тут будут написаны изменения ветки problem <br>
            &gt;&gt;&gt;&gt;&gt;&gt; problem
        </div>
        <p>В верхней части сообщения указаны изменения, сделанные в основной на данный момент ветке, в нижней части - во
            второй
            ветке, которую мы хотим слить с первой. Для разрешения конфликта нам необходимо привести содержимое файла к
            общему виду,
            предварительно удалив (руками в редакторе!) все обозначения конфликта, которые оставил в нем Git. <br>
            <br>
            После того, как мы разрешим конфликт (то есть оставим правильный код в файле), проиндексируем наш файл и
            сделаем коммит
            в ветке main, в которой мы сейчас находимся:
        </p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            git add file.txt <br>
            git commit -m "слияние" <br>
            <br>
        </div>
        <p>
            Только после этого мы можем переключиться на вторую ветку <i>problem</i> и проделать все те же операции, что
            и в ветке <i>main,</i> в том числе и заменить содержимое файла file.txt на то же, что и в первой ветке:
        </p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            git add file.txt <br>
            git commit -m "слияние" <br>
            <br>
        </div>
        <p>Теперь мы можем снова переключиться на основную ветку и влить в нее вторую:</p>

        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            git checkout main <br>
            git merge problem <br>
            <br>
        </div>

        <h2>Удаление веток в Git</h2>

        <p>Как уже было сказано в предыдущих уроках, Git не удаляет ветки при слиянии. Если ветка стала вам не нужна, ее
            нужно
            удалить специальной командой. Для этого нужно использовать команду branch с флагом -D, после которого через
            пробел указывается имя удаляемой ветки. <br>
            <br>
            Давайте для примера удалим нашу ветку problem:
        </p>
        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            git branch -D problem <br>
            <br>
        </div>
        <p>После выполнения команды мы увидим следующее сообщение:</p>

        <div class="ramka">ТЕРМИНАЛ <br>
            <br>
            Deleted branch problem (was 0569304). <br>
            <br>
        </div>
        <i>Удалите одну из побочных веток в вашем Git-репозитории.</i><br>
        <br>
        <img src="../IMG/49.png" alt="49" width="1040px">

        <h2>Переименование веток в Git</h2>

        <p>Бывают случаи, когда нам нужно переименовать ветку, но при этом сохранить всю историю ее изменений и
            коммитов. Для этих
            целей мы используем команду branch с флагом <i>--move</i>, после которого через пробел указывается исходное
            и новое имена:</p>
        <div class="ramka">
            ТЕРМИНАЛ <br>
            git branch --move old-name new-name <br>
            <br>
        </div>
        <i>Переименуйте ветку в вашем Git репозитории.</i><br>
        <br>
        <img src="../IMG/50.png" alt="50" width="1040px">

        <h2>Просмотр последнего коммита веток в Git</h2>

        <p>Можно узнать, какие коммиты были сделаны последними в каждой из существующих веток. Для этого применяется
            следующая
            команда:</p>
        <div class="ramka">
            ТЕРМИНАЛ <br>
            <br>
            git branch -v<br>
            <br>
        </div>
        <br>
        <i>Посмотрите последние коммиты ваших веток.</i><br>
        <br>
        <img src="../IMG/51.png" alt="51" width="1040px">

        <h2>Слитые ветки в Git</h2>

        <p>
            Слитые ветки - это ветки, в которые осуществлялось вливание другой ветки. Можно посмотреть эти ветки с
            помощью следующей
            команды:
        </p>
        <div class="ramka">
            ТЕРМИНАЛ <br>
            <br>
            git branch --merged<br>
            <br>
        </div>
        <br>
        <p>Для вывода не слитых веток, либо тех, что при слиянии были вспомогательными, используем следующую команду:
        </p>

        <div class="ramka">
            ТЕРМИНАЛ <br>
            <br>
            git branch --no-merged<br>
            <br>
        </div>
        <ol>
            <li>Просмотрите все слитые ветки. <br>
                <br>
                <img src="../IMG/52.png" alt="52" width="1000px">
                <br>
                <br>
            </li>
            <li>Просмотрите все неслитые ветки. <br>
                <br>
                <img src="../IMG/53.png" alt="53" width="1000px">
                <br>
                <br>
            </li>
        </ol>

        <h2>Простое перебазирование коммитов в Git</h2>

        <p>Система Git предоставляет два способа внесения изменений при работе с ветками: <strong>слияние и
                перебазирование</strong>. <br>
            <br>
            Достоинством перебазирования является то, что история коммитов обеих веток, в отличие от слияния, будет
            выглядеть более линейной и простой для восприятия членами команды, работающей на одним проектом. <br>
            <br>
            В Git слияние, выполняемое с помощью команды <i>merge, </i>происходит как трехстороннее объединение
            последних
            изменений двух сливаемых веток и самого нового снимка родительской ветки, общей для этих сливаемых веток.
            При этом
            сливаются только конечные снимки коммитов веток, а не вся их предыдущая история. <br>
            <br>
            Перебазирование предполагает применение изменений из одной ветки (текущей) поверх другой ветки (которая
            сливается с текущей). Давайте создадим ветку test, в которой мы сделаем новый файл <i>file.txt,</i>
            проиндексируем
            его и
            сделаем коммит:
        </p>
        <div class="ramka">
            ТЕРМИНАЛ <br>
            <br>
            git branch test <br>
            git switch test <br>
            git add <file class="txtbr"></file> <br>
            git commit -m "commit from branch test" <br>
            <br>
        </div>

        <p>Теперь переключимся на ветку test и перебазируем ее относительно главной ветки main:</p>
        <div class="ramka">
            ТЕРМИНАЛ <br>
            <br>
            git checkout test <br>
            git rebase main<br>
            <br>
        </div>
        <br>
        <p>Сам процесс перебазирования происходит следующим образом: сначала Git делает снимок родительской ветки
            main, который
            сохраняется во временном файле. Затем текущая ветка test вставляет свои изменения после самого последнего
            коммита ветки
            main. Теперь история коммитов основной ветки будет выглядеть так: <br>
            <br>
            После перебазирования история коммитов ветки test также будет выглядеть аналогично ветке main.<br>
            <br>
            Затем этого можно перейти на ветку main и выполнить слияние перемоткой, т.е. main снова станет главной и
            включит в себя все изменения с ветки test:
        </p>
        <br>
        <div class="ramka">
            ТЕРМИНАЛ <br>
            <br>
            git merge test <br>
            <br>
        </div>

        <h2>Более сложное перебазирование коммитов в Git</h2>

        <p>В системе Git можно выполнить перебазирование для трех веток. Пусть у нас есть две ветки member1 и member2, у
            которых
            есть разные коммиты.<br>
            <br>
            В процессе работы над проектом нам понадобилось вставить коммиты commit3, commit4 из ветки member2 в ветку
            member1 и
            применить их на ветке main. Для этого выполняем следующую команду:
        </p>
        <div class="ramka">
            ТЕРМИНАЛ <br>
            <br>
            git rebase --onto main member1 member2 <br>
            <br>
        </div>
        <p>Данная команда приказывает системе Git переключиться на ветку member2, найти в ней коммиты, которых нет в
            ветке member1
            и слить только эти недостающие коммиты с веткой master.<br>
            <br>
            Теперь выполним слияние обратной перемоткой:
        </p>
        <div class="ramka">
            ТЕРМИНАЛ <br>
            <br>
            git switch main<br>
            git merge member2<br>
            <br>
        </div>
        <br>
        <p>Следует помнить, что нельзя перебазировать коммиты, находящиеся во внешнем репозитории. Все участники команды
            берут из
            него коммиты для выполнения своей задачи, но если произошло перебазирование веток, всем участникам придется
            снова
            сливать коммиты со своими ветками, что может вызвать дополнительную путаницу.</p>


    </div>


    <br><br><br><br><br><br>
</body>

</html>
